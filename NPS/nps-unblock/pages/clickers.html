<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hays CISD</title>
  <meta name="author" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/x-icon" href="https://myapps.classlink.com/favicon.ico">
  <link rel="stylesheet" href="game-style.css">

  <!-- Ruffle Import -->
  <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>

  <style>
    body.game-active * {
      display: none;
    }

    #game-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
    }
  </style>

</head>

<body>
    <content>
        <div class="btn-container">
            <button id="learn-to-fly-idle" data-url="../Games/secure_LearnToFlyIdle.swf">Learn to Fly Idle</button>
            <button id="newtab" data-url="../Games/secure_LearnToFlyIdle.swf" style="position: absolute; top: 0; right: 0; width: 5%; height: 100%; border: none; background: transparent;">

                <img src="new tab button.png" alt="New Tab" class="nt-img">
            </button>
        </div>
    </content>

    <div id="game-container"></div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const ruffle = window.RufflePlayer.newest(); // Initialize Ruffle player
        const gameContainer = document.getElementById('game-container'); // Container for the SWF

        const gameButtons = document.querySelectorAll('button:not([id$="newtab"])');
        gameButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const url = button.getAttribute('data-url');

                if (url && url.endsWith('.swf')) {
                    document.body.classList.add('game-active');
                   
                    const player = ruffle.createPlayer();
                    gameContainer.appendChild(player);
                    player.load(url);
                } else {
                    window.location.href = url;
                }
            });
        });


        const newTabButtons = document.querySelectorAll('button[id$="newtab"]');
        newTabButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const url = button.getAttribute('data-url');
                window.open(url, '_blank'); // Open the URL in a new tab
            });
        });
    });
</script>

</body>

</html>
